{% extends "base.html" %}
{% block title %}Settings - BidLens{% endblock %}
{% block content %}
<h1>Settings</h1>
<p class="muted">These filters control your team’s feed and daily digest.</p>

<form method="POST" action="/settings" class="form">

  <div class="form-row">
    <label>Include keywords</label>
    <textarea name="include_keywords" rows="3" placeholder="evaluation, survey, data analysis, workforce">{% if profile and profile.include_keywords %}{{ profile.include_keywords }}{% endif %}</textarea>
    <small>Comma-separated. These increase fit.</small>
  </div>

  <div class="form-row">
    <label>Exclude keywords</label>
    <textarea name="exclude_keywords" rows="3" placeholder="construction, janitorial, HVAC">{% if profile and profile.exclude_keywords %}{{ profile.exclude_keywords }}{% endif %}</textarea>
    <small>Comma-separated. These suppress matches.</small>
  </div>

  <div class="form-row">
    <label>Preferred agencies (optional)</label>
    <textarea name="include_agencies" rows="2" placeholder="HHS, CDC, CMS">{% if profile and profile.include_agencies %}{{ profile.include_agencies }}{% endif %}</textarea>
  </div>

  <div class="form-row">
    <label>Excluded agencies (optional)</label>
    <textarea name="exclude_agencies" rows="2" placeholder="DoD">{% if profile and profile.exclude_agencies %}{{ profile.exclude_agencies }}{% endif %}</textarea>
  </div>

  <hr />

  <div class="form-row">
    <label>Due date window (days out)</label>
    <div style="display:flex; gap:12px;">
      <div style="flex:1;">
        <input type="number" name="min_days_out" placeholder="Min (e.g. 3)" value="{{ profile.min_days_out if profile else '' }}">
      </div>
      <div style="flex:1;">
        <input type="number" name="max_days_out" placeholder="Max (e.g. 60)" value="{{ profile.max_days_out if profile else '' }}">
      </div>
    </div>
  </div>

  <hr />

  <div class="form-row">
    <label>Daily digest recipients</label>
    <input type="text" name="digest_recipients" placeholder="bd@acme.com, ops@acme.com" value="{{ profile.digest_recipients if profile else '' }}">
  </div>

  <div class="form-row">
    <label>Max items per digest</label>
    <input type="number" name="digest_max_items" value="{{ profile.digest_max_items if profile else 20 }}">
  </div>

  <div class="form-row">
    <label>Digest time (local)</label>
    <input type="text" name="digest_time_local" placeholder="07:00" value="{{ profile.digest_time_local if profile else '07:00' }}">
    <small>We’ll wire this into n8n later.</small>
  </div>

  <button type="submit" class="btn btn-primary">Save Settings</button>
</form>
{% endblock %}
